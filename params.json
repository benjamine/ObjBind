{"name":"Objbind","body":"ObjBind\r\n=========\r\n\r\n*Change Tracking, Events and Traversing for plain JavaScript objects and arrays*\r\n\r\nObjBind is a small library that allows to track changes or other custom events using a jQuery-like syntax.\r\neg:\r\n\r\n\t// sample data\r\n\tvar artists = [{\r\n            name: 'Atahualpa Yupanqui',\r\n            birthplace: 'Argentina',\r\n            genres: ['Folklore', 'Canci√≥n de Autor']\r\n        }, {\r\n            name: 'Carlos Gardel',\r\n            birthplace: 'Argentina',\r\n            genres: ['Tango']\r\n        }, {\r\n            name: 'Pixinguinha',\r\n            birthplace: 'Brasil',\r\n            genres: ['Choro']\r\n        }];\r\n    \r\n            \r\n\t$o(artists)\r\n\t\r\n\t\t// recursively include all related objects and arrays\r\n\t\t.deep() \r\n\t\t\r\n\t\t// custom events\r\n\t\t.bind('saved'), function(e) {\r\n\t\t\tconsole.log('objects saved successfully');\r\n\t\t})\r\n\t\t\r\n\t\t// some built-in events for change tracking\r\n\t\t.bind('propertyChanging added'), function(e) {\r\n\t\t\tif (e.property){\r\n\t\t\t\tconsole.log('property ' + e.property + ' changing from ' + e.previousValue + ' to '+ e.value);\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log(e.addItems.length + ' items added');\r\n\t\t\t}\r\n\t\t})\r\n\t\t\r\n\t\t// alias of bind('change', function())\r\n\t\t.change(function(e)) {\r\n\t\t\t// log any type of object or array change\r\n\t\t\tconsole.log(e);\r\n\t\t});\r\n\r\nObjBind will detect property value changes and Array changes (items added, items removed), the only exceptions are:\r\n* Object new properties (ie. undefined at first bind), JavaScript doesn't support any notifying mechanism for properties beeing added\r\n* Array length change, sometimes .length property is assigned to trim an Array (some browsers support adding a setter to this property, but I found support to be rare and problematic)\r\n* Array index set (ie, a[index] = value), again no notifying mechanism for this on JavaScript.\r\nIf you want to get proper change tracking:\r\n* check that all properties are defined (even null) at first bind\r\n* allways use .splice, .pop. or .unshift to remove items form an Array\r\n\r\nBut event if you can't use this alternatives (eg. don't have control on object modification code), you can detect this changes using the .lookup function.\r\nThis function will compare the current state of objects against their last known state and trigger all change events immediately, eg:\r\n             \r\n\t$o(artists)\r\n\t\r\n\t\t// recursively include all related objects and arrays\r\n\t\t.deep() \r\n\t\t\r\n\t\t.change(function(e)) {\r\n\t\t\t// log any type of object or array change\r\n\t\t\tconsole.log(e);\r\n\t\t});\r\n\r\n\t// new property, undetected change\r\n\tartists[1].nickname = 'Carlitos';\r\n\t\r\n\t// 3rd item removed, undetected change\r\n\tartists.length = 2;\r\n\r\n\t// artist[1], and artists array changes are triggered \r\n\t$o(artists).deep().lookup();\r\n\r\nHow it works?\r\n\r\nWhen the first binding is made to an object or Array change, ObjBind adds setters & getters to objects, and overrides modifying methods on Arrays (ie: push, pop, shift, unshift and splice).\r\nProperty getters & setters support changes from browser to browser, ObjBind automatically detects the best supported mechanism and uses it (check Targeted Platforms for more details).  \r\n\r\n---------------\r\n\r\n\r\nTargeted platforms\r\n----------------\r\n\r\n* Chrome 10 Windows\r\n* Opera 9.80 Windows\r\n* Safari 533.19.4 Windows\r\n* Firefox 4.0 Windows\r\n* IE 8 and 9, Windows\r\n\r\n[QUnit](http://docs.jquery.com/Qunit) is used for unit testing, so other browsers could be easily added. \r\nJust open the [test page](http://benjamine.github.com/ObjBind/test/qunit.htm) on your preferred browser. \r\n\r\nObjBind can be used on IE7 or older browsers, but property change detection won't work on it. IE7 doesn't provide any change tracking solution for this, so property changes must allways be done using $o(..).prop() function, ie:\r\n\r\n\tvar customer = { name: 'John Smith', age: 35 };\r\n\t$o(customer).change(function() { alert('change detected'));\r\n\t\r\n\tcustomer.age = 45; // WRONG: change is not detected\r\n\t$o(customer).prop('age', 46); // RIGHT: change is detected\r\n\r\n\tconsole.log($o(customer).prop('age')); // prints '46'\r\n\r\nOr you can use normal syntax, and lookup for changes with the .lookup function:\r\n\r\n\tcustomer.age = 45; // undetected change\r\n\t\r\n\t$o(customer).lookup(); // change is detected now\r\n\r\nchange tracking support can be checked using:\r\n\r\n\tconsole.log($o.propertyInterceptMode()); // member of $o.propertyInterceptModes enum\r\n\tconsole.log($o.propertyInterceptModeName());\r\n\t// prints 'DEFINESETTER' on most browsers, Chrome, FF, Safari, etc.\r\n\t// prints 'DEFINEPROPERTY' on IE9, etc.\r\n\t// prints 'DEFINEPROPERTYONLYDOM' on IE8, change tracking only on DOM objects, you can use $o.domClone() to clone your entities as DOM objects\r\n\t// prints 'NONE' on IE7, use $o.prop() when setting/getting properties or $o(...).lookup().\r\n\r\nIncluding ObjBind in your application\r\n---------------\r\n\r\nDownload the latest release from the web site (http://github.com/benjamine/ObjBind) and copy \r\n`dist/objbind.debug.js` or `dist/objbind.js` (minified) to a suitable location. Then include it in your HTML\r\nlike so:\r\n\r\n    <script type=\"text/javascript\" src=\"/path/to/objbind.min.js\"></script>\r\n\t\r\nNote: you can use ObjBind on browserless JavaScript environments too (as [Node.js](http://nodejs.org/), or [Mozilla Rhino](http://www.mozilla.org/rhino/)). \r\n\r\nUsing ObjBind with JQuery\r\n---------------\r\n\r\nIf jQuery is loaded when ObjBind is included, ObjBind will extend jQuery allowing to use pure jQuery syntax, eg:\r\n\r\n \r\n\t$(artists)\r\n\t\r\n\t\t// custom events\r\n\t\t.bind('saved'), function(e) {\r\n\t\t\tconsole.log('objects saved successfully');\r\n\t\t})\r\n\t\t\r\n\t\t// activate change tracking on this objects\r\n\t\t.trackChanges()\r\n\t\t\r\n\t\t// some built-in events for change tracking\r\n\t\t.bind('propertyChanging added'), function(e) {\r\n\t\t\tif (e.property){\r\n\t\t\t\tconsole.log('property ' + e.property + ' changing from ' + e.previousValue + ' to '+ e.value);\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log(e.addItems.length + ' items added');\r\n\t\t\t}\r\n\t\t})\r\n\t\t\r\n\t\t// alias of bind('change', function())\r\n\t\t.change(function(e)) {\r\n\t\t\t// log any type of object or array change\r\n\t\t\tconsole.log(e);\r\n\t\t});\r\n\r\nNote that bind() and change() methods here are the regular jQuery methods (actually custom events on objects are already supported by jQuery), the only requirement is calling the .trackChanges() method to activate change tracking.\r\nTo lookup for new object properties or array length changes use:\r\n\r\n\t// same as: $o(artists).deep().lookup();\r\n\t$(artists).lookupChanges();\r\n\r\nRunning Unit Tests\r\n----------------\r\n\r\nJust open test/qunit.htm file on any browser, test will be run on load.\r\n\r\n\r\nDocumentation\r\n-------------\r\n\r\nJSDoc is used. Html API Docs are generated with [jsdoc-toolkit](http://code.google.com/p/jsdoc-toolkit/) and included in the docs/api folder, they also can be accessed at:\r\n\r\n[API Docs](http://benjamine.github.com/ObjBind/doc/api/) ","tagline":"change tracking (and custom events) for plain JavaScript objects and Arrays","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}